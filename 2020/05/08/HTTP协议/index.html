<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Yokin的博客">
    <meta name="keyword"  content="前端技术分享">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        HTTP协议 - Yokin的博客 | Yokin&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 重剑无锋,大巧不工! </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Yokin</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP协议"><span class="toc-text">HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概述"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一次完整的HTTP服务过程"><span class="toc-text">一次完整的HTTP服务过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7个步骤"><span class="toc-text">7个步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#渲染步骤详情"><span class="toc-text">渲染步骤详情</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#请求报文"><span class="toc-text">请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#响应报文"><span class="toc-text">响应报文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP状态码"><span class="toc-text">HTTP状态码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP请求方法"><span class="toc-text">HTTP请求方法</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 重剑无锋,大巧不工! </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        HTTP协议
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-05-08 07:03:23</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#HTTP" title="HTTP">HTTP</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p> 超文本传输协议（英文：<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP是万维网的数据通信的基础。 </p>
<h2 id="一次完整的HTTP服务过程"><a href="#一次完整的HTTP服务过程" class="headerlink" title="一次完整的HTTP服务过程"></a>一次完整的HTTP服务过程</h2><h3 id="7个步骤"><a href="#7个步骤" class="headerlink" title="7个步骤"></a>7个步骤</h3><p>假设我们在谷歌浏览器地址栏输入:<code>www.github.com</code>,就能产生一次完整的HTTP服务过程,该过程详细划分可以分为7个阶段。</p>
<ul>
<li>1.<code>DNS</code>域名解析服务器会对<code>www.github.com</code>这个网址进行<code>DNS</code>域名解析，得到对应的IP地址<code>13.229.188.59</code> </li>
<li>2.根据这个<code>IP</code>地址，找到对应的服务器，发起<code>TCP</code>的三次握手</li>
<li>3.建立<code>TCP</code>连接后发起<code>HTTP</code>请求（先得到建立<code>TCP</code>连接，才能发起<code>HTTP</code>请求）</li>
<li>4.服务器响应<code>HTTP</code>请求，浏览器得到<code>html</code>代码</li>
<li>5.浏览器解析<code>html</code>代码，在解析的过程中遇到静态资源,会请求<code>html</code>代码中的静态资源（如js、css、图片等）（先得到<code>html</code>代码，才能去找这些资源）</li>
<li>6.浏览器对页面进行渲染呈现给用户</li>
<li>7.服务器关闭TCP连接</li>
</ul>
<h3 id="渲染步骤详情"><a href="#渲染步骤详情" class="headerlink" title="渲染步骤详情"></a>渲染步骤详情</h3><p>浏览器得到<code>HTML</code>代码后,对页面的渲染步骤</p>
<ul>
<li>1.解析<code>html</code>代码构成<code>DOM</code>树</li>
<li>2.解析CSS代码构成渲染树</li>
<li>3.边解析,边渲染</li>
<li>4.<code>JS</code>是单线程运行的，<code>JS</code>有可能修改<code>DOM</code>结构，意味着<code>JS</code>执行完成前，后续所有资源的下载是没有必要的，所以<code>JS</code>是单线程，会阻塞后续资源下载。</li>
</ul>
<h3 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h3><p>我们把客户端发送一个HTTP请求到服务器的请求消息称为<strong>请求报文</strong>,请求报文由请求行（request line）、请求头部（request header）、请求主体(request body)三个部分组成。</p>
<p><strong>请求行</strong>（request line）</p>
<p>请求行包括请求方式method,请求地址URL(request url)和请求协议（protocol version三个部分）</p>
<p><strong>请求头</strong>（request header）</p>
<p>包括主机地址,浏览器信息,客户端接收的数据格式</p>
<p><strong>请求主体</strong>(request body)</p>
<p>客户端发送给服务端的数据和内容</p>
<p>实例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Get请求例子，使用Charles抓取的request：</span><br><span class="line">GET /562f25980001b1b106000338.jpg HTTP/1.1 // 请求行</span><br><span class="line">Host    img.mukewang.com //请求头开始</span><br><span class="line">User-Agent    Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36</span><br><span class="line">Accept    image/webp,image/*,*/*;q=0.8</span><br><span class="line">Referer    http://www.imooc.com/</span><br><span class="line">Accept-Encoding    gzip, deflate, sdch</span><br><span class="line">Accept-Language    zh-CN,zh;q=0.8 //请求头结束</span><br><span class="line">//请求数据也叫主体，可以添加任意的其他数据。这个例子的请求数据为空。</span><br><span class="line"></span><br><span class="line">POST请求例子，使用Charles抓取的request：</span><br><span class="line">POST / HTTP1.1</span><br><span class="line">Host:www.wrox.com</span><br><span class="line">User-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)</span><br><span class="line">Content-Type:application/x-www-form-urlencoded</span><br><span class="line">Content-Length:40</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line"></span><br><span class="line">name=Professional%20Ajax&amp;publisher=Wiley</span><br><span class="line">第一部分：请求行，第一行明了是post请求，以及http1.1版本。</span><br><span class="line">第二部分：请求头部，第二行至第六行。</span><br><span class="line">第三部分：空行，第七行的空行。</span><br><span class="line">第四部分：请求数据，第八行。</span><br></pre></td></tr></table></figure>

<p>可以看出，上面的请求包含三个部分：请求行、请求头、空格/消息体，比之前的 GET 请求多了一个请求消息，其中 请求头和消息体之间用一个空行分割。POST 请求的参数不在 URL 中，而是在消息体中，请求头中多了一项 Content-Length 用于表示消息体的字节数，这样服务器才能知道请求是否发送结束。这也就是 GET 请求和 POST 请求的主要区别。</p>
<h3 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h3><p>我们把 服务器接收并处理客户端发过来的请求后会返回一个HTTP的响应消息称为<strong>响应报文</strong>,响应报文由状态行（status line）、响应头部（response header）、响应主体(response body)三个部分组成。</p>
<p><strong>状态行</strong>（status line）</p>
<p>状态行包括协议名称和版本,HTTP状态码和状态消息</p>
<p><strong>响应头部</strong>（response header）</p>
<p> Date:生成响应的日期和时间；Content-Type:指定了MIME类型的HTML(text/html),编码类型是UTF-8 </p>
<p><strong>响应主体</strong>(response body)</p>
<p> 空行后面的html部分为响应正文，即服务器返回客户端的文本信息。</p>
<p>实例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK   // 状态行（status line）</span><br><span class="line">Date: Fri, 22 May 2009 06:07:21 GMT  //响应头部（response header）</span><br><span class="line">Content-Type: text/html; charset=UTF-8 响应头部（response header）</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> 		              // 响应主体(response body)开始</span><br><span class="line">      <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--body goes here--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>                   // 响应主体(response body)结束</span><br></pre></td></tr></table></figure>

<h2 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h2><ul>
<li><p>(1)<code>1XX</code> :信息状态码(表示请求已接收，继续处理)</p>
<ul>
<li><code>100 Continue</code>  继续，一般在发送<code>post</code>请求时，已发送了<code>http header</code>之后服务端将返回此信息，表示确认，之后发送具体参数信息 </li>
</ul>
</li>
<li><p>(2)<code>2XX</code> :成功状态码(表示请求已被成功接收、理解、接受)</p>
<ul>
<li><code>200 OK</code>正常返回信息（没有问题）</li>
<li><code>201 Created</code>请求成功并且服务器创建了新的资源</li>
<li><code>202 Accepted</code>服务器已接受请求，但尚未处理</li>
</ul>
</li>
<li><p>(3)<code>3XX</code>:重定向(要完成请求必须进行更进一步的操作)</p>
<ul>
<li><code>301 Moved Permanently</code>请求的网页已永久移动到新位置</li>
<li><code>302 Found</code>临时重定向（要你去找别人）</li>
<li><code>303 See Other</code>临时性重定向,且总是使用<code>GET</code>请求新的<code>URL</code></li>
<li><code>304 Not Modified</code>自从上次请求后,请求的网页未修改过（要你去拿缓存）</li>
</ul>
</li>
<li><p>(4)<code>4XX</code>:客户端错误(请求有语法错误或请求无法实现)</p>
<ul>
<li><code>400 Bad Request</code>  服务器无法理解请求的格式，客户端不应当尝试再次使用相同的内容发起请求。 </li>
<li><code>401 Unauthorized</code>  请求未授权</li>
<li><code>403 Forbidden</code>  禁止访问（服务端有这个资源，但是没有访问权限）</li>
<li><code>404 Not Found</code> 找不到如何与 <code>URI</code> 相匹配的资源（服务器没有这个资源）</li>
</ul>
</li>
<li><p>(5)<code>5XX</code>:服务端错误(服务器未能实现合法的请求)</p>
<ul>
<li><code>500 Internal Server Error</code>  服务器内部出现错误，是最常见的服务器端错误 （服务器这边有问题）</li>
<li><code>503 Service Unavailable</code>  服务器端暂时无法处理请求（可能是过载或维护） </li>
</ul>
</li>
</ul>
<h2 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h2><p>根据HTTP标准，HTTP请求可以使用多种请求方法。<br>        HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。<br>        HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET     <span class="comment">// 请求指定的页面信息，并返回实体主体。</span></span><br><span class="line">HEAD    <span class="comment">// 类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头</span></span><br><span class="line">POST    <span class="comment">// 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。</span></span><br><span class="line">PUT     <span class="comment">// 从客户端向服务器传送的数据取代指定的文档的内容。</span></span><br><span class="line">DELETE  <span class="comment">// 请求服务器删除指定的页面。</span></span><br><span class="line">CONNECT <span class="comment">// HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。</span></span><br><span class="line">OPTIONS <span class="comment">// 允许客户端查看服务器的性能。</span></span><br><span class="line">TRACE   <span class="comment">// 回显服务器收到的请求，主要用于测试或诊断。</span></span><br></pre></td></tr></table></figure>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/btcwiki">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/Zhuyokin">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://yokinzhu.blogspot.com/" target="_blank" rel="noopener">本人废弃的博客</a></span>
        <span>/</span>
        
        <span><a href="https://bicuz.com" target="_blank" rel="noopener">区块链导航</a></span>
        <span>/</span>
        
        <span><a href="https://www.re0.cn" target="_blank" rel="noopener">re0</a></span>
        <span>/</span>
        
        <span><a href="#">It helps SEO</a></span>
        <span>/</span>
        
    </p>
    
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
